import*as e from"highlight.js";import*as t from"markdown-it";import*as r from"markdown-it-deflist";import*as a from"markdown-it-emoji";import*as s from"markdown-it-footnote";import*as o from"markdown-it-ins";import*as n from"markdown-it-mark";import*as i from"markdown-it-sub";import*as u from"markdown-it-sup";import*as l from"axios";var d={0:t=>{t.exports=e},577:e=>{e.exports=t},167:e=>{e.exports=r},389:e=>{e.exports=a},989:e=>{e.exports=s},356:e=>{e.exports=o},305:e=>{e.exports=n},754:e=>{e.exports=i},278:e=>{e.exports=u}},f={};function c(e){var t=f[e];if(void 0!==t)return t.exports;var r=f[e]={exports:{}};return d[e](r,r.exports,c),r.exports}c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var p={};(()=>{c.d(p,{cn:()=>u,L6:()=>h,ZP:()=>m,_I:()=>f,L5:()=>n,gp:()=>o,yC:()=>i,Dd:()=>d});const e=(t={default:()=>l.default},r={},c.d(r,t),r);var t,r;"undefined"!=typeof global&&void 0===global.btoa&&(global.btoa=function(e){return Buffer.from(e,"binary").toString("base64")}),"undefined"!=typeof global&&void 0===global.atob&&(global.atob=function(e){return Buffer.from(e,"base64").toString("binary")}),"undefined"!=typeof window&&void 0===window.btoa&&(window.btoa=function(e){return Buffer.from(e,"binary").toString("base64")}),"undefined"!=typeof window&&void 0===window.atob&&(window.atob=function(e){return Buffer.from(e,"base64").toString("binary")});const a=e=>{if("undefined"!=typeof btoa)return btoa(e);if("undefined"!=typeof Buffer)return Buffer.from(e,"binary").toString("base64");throw new Error("btoa is not available in this environment")},s=e=>{if("undefined"!=typeof atob)return atob(e);if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").toString("binary");throw new Error("atob is not available in this environment")};async function o(t,r,a="",s){let o="true";try{const n=`https://api.github.com/repos/${t}/${r}/contents/${a}`,i=s?{Authorization:`token ${s}`}:{},u=await(0,e.default)(n,{headers:i}),l=await u.data;let d=[];return l.forEach((e=>{"file"==e.type&&/([a-zA-Z0-9\s_\\.\-:])+(.md)$/gi.test(e.name)&&d.push(e.name)})),d.push({status:o}),d}catch(e){return o="false",{status:o,error:"Invalid user name or repo name"}}}async function n(t,r,a,o){let n="true";if(!/([a-zA-Z0-9\s_\\.\-:])+(.md)$/gi.test(a))return n="false",{status:n,error:"Invalid File Path"};try{const i=c(0),u=c(577)({html:!0,linkify:!0,typographer:!0,breaks:!0,highlight:function(e,t){if(t&&i.getLanguage(t))try{return'<pre class="hljs custom-code-hljs-class"><code>'+i.highlight(e,{language:t,ignoreIllegals:!0}).value+"</code></pre>"}catch(e){}return'<pre class="hljs custom-code-hljs-class"><code>'+u.utils.escapeHtml(e)+"</code></pre>"}}).use(c(389)).use(c(167)).use(c(754)).use(c(278)).use(c(356)).use(c(305)).use(c(989)),l=`https://api.github.com/repos/${t}/${r}/contents/${a}`,d=o?{Authorization:`token ${o}`}:{},f=await(0,e.default)(l,{headers:d}),p=await f.data,h=u.render(s(p.content));return n="true",{status:n,content_markdown:s(p.content),content_html:h}}catch(e){return n="false",{status:n,error:"Invalid user name or repo name"}}}async function i(t,r,a,s){let o="false";if(0==t.length||0==r.length||0==a.length)return o="false",{status:o,error:"Provide Valid Data!"};try{const n=`https://api.github.com/search/code?q=${t}+repo:${r}/${a}`,i=s?{Authorization:`token ${s}`}:{},u=await(0,e.default)(n,{headers:i}),l=await u.data,d=[],f=[];return l.total_count>0?(l.items.forEach((e=>{if(!/([a-zA-Z0-9\s_\\.\-:])+(.md)$/gi.test(e.name))return o="false",{status:o,error:"No Markdown File Found"};f.push({filename:e.name,file_path:e.path})})),o="true",d.push({status:o,total_count:f.length},f),d):(o="false",{status:o,error:"Nothing Found!"})}catch(e){return o="false",{status:o,error:"Invalid user name or repo name"}}}async function u(t,r,s,o,n,i){let u="true";if(!n)return u="false",{status:u,error:"Token is required for write operations"};if(!/([a-zA-Z0-9\s_\\.\-:])+(.md)$/gi.test(s))return u="false",{status:u,error:"Only .md files are supported"};try{const l=`https://api.github.com/repos/${t}/${r}/contents/${s}`,d={Authorization:`token ${n}`};let f=null;try{f=(await(0,e.default)(l,{headers:d})).data.sha}catch(e){}const c={message:i||`Create ${s}`,content:a(o),...f&&{sha:f}},p=await e.default.put(l,c,{headers:d});return u="true",{status:u,message:f?"File updated successfully":"File created successfully",file:p.data.content}}catch(e){return u="false",{status:u,error:e.response?.data?.message||"Failed to create/update file"}}}async function d(t,r,s,o,n,i){let u="true";if(!n)return u="false",{status:u,error:"Token is required for write operations"};if(!/([a-zA-Z0-9\s_\\.\-:])+(.md)$/gi.test(s))return u="false",{status:u,error:"Only .md files are supported"};try{const l=`https://api.github.com/repos/${t}/${r}/contents/${s}`,d={Authorization:`token ${n}`},f=(await(0,e.default)(l,{headers:d})).data.sha,c={message:i||`Update ${s}`,content:a(o),sha:f},p=await e.default.put(l,c,{headers:d});return u="true",{status:u,message:"File updated successfully",file:p.data.content}}catch(e){return u="false",{status:u,error:e.response?.data?.message||"Failed to update file"}}}async function f(t,r,a,s,o){let n="true";if(!s)return n="false",{status:n,error:"Token is required for write operations"};try{const i=`https://api.github.com/repos/${t}/${r}/contents/${a}`,u={Authorization:`token ${s}`},l={message:o||`Delete ${a}`,sha:(await(0,e.default)(i,{headers:u})).data.sha};return await e.default.delete(i,{data:l,headers:u}),n="true",{status:n,message:"File deleted successfully"}}catch(e){return n="false",{status:n,error:e.response?.data?.message||"Failed to delete file"}}}async function h(e,t,r,a,s){let o="true";if(!a)return o="false",{status:o,error:"Token is required for write operations"};try{const o=r.endsWith("/")?`${r}.gitkeep`:`${r}/.gitkeep`,n=`# ${r}\n\nThis folder was created using MarkGit.`,i=await u(e,t,o,n,a,s||`Create folder ${r}`);return"true"===i.status?{status:"true",message:`Folder ${r} created successfully`,folder_path:r}:i}catch(e){return o="false",{status:o,error:e.message||"Failed to create folder"}}}const m={getList:o,getContent:n,search:i,createFile:u,updateFile:d,deleteFile:f,createFolder:h}})();var h=p.cn,m=p.L6,g=p.ZP,b=p._I,w=p.L5,y=p.gp,$=p.yC,k=p.Dd;export{h as createFile,m as createFolder,g as default,b as deleteFile,w as getContent,y as getList,$ as search,k as updateFile};